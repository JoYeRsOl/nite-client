exports.id=249,exports.ids=[249],exports.modules={1066:(e,o,t)=>{"use strict";t.d(o,{K:()=>c});var n=t(687),r=t(3210),i=t(3947),s=t.n(i);function c({mediaStream:e,isMuted:o=!1}){let t=(0,r.useRef)(null);return(0,n.jsx)("div",{className:s().videoFeed,children:(0,n.jsx)("video",{className:s().video,ref:t,autoPlay:!0,playsInline:!0,muted:o})})}},1757:(e,o,t)=>{"use strict";t.d(o,{u:()=>a});var n=t(687),r=t(9642),i=t(2783),s=t(6274),c=t(3210);function a(){let e=(0,c.useContext)(s.TP);return(0,n.jsx)(i.f,{icon:r.qU.Sound,onClick:o=>{e.setState({...e.context,soundMuted:o})}})}},2123:(e,o,t)=>{"use strict";t.d(o,{$:()=>c});var n=t(687),r=t(1066),i=t(3947),s=t.n(i);function c(e){let{streams:o}=e;return(0,n.jsx)("div",{className:s().videoFrame,children:o.map(e=>(0,n.jsx)(r.K,{mediaStream:e.mediaStream,isMuted:e.isMuted}))})}},2674:()=>{},2783:(e,o,t)=>{"use strict";t.d(o,{f:()=>l});var n=t(687),r=t(8226),i=t.n(r),s=t(474),c=t(3210),a=t(9642);function l(e){let{icon:o,onClick:t}=e,[r,l]=(0,c.useState)(a.dS[o]),[d,u]=(0,c.useState)(!0);return console.log(`State: ${d} icon: ${r}`),(0,n.jsx)("div",{className:i().toggleButton,onClick:()=>{u(!d),t&&t(!d)},children:(0,n.jsx)(s.default,{src:r,alt:"pohui mne",width:24,height:24})})}},2850:(e,o,t)=>{"use strict";t.d(o,{Q:()=>c});var n=t(687),r=t(9642),i=t(2783),s=t(7898);function c(){let e=(0,s.useRouter)();return(0,n.jsx)(i.f,{icon:r.qU.Call,onClick:()=>{e.push("/")}})}},3686:(e,o,t)=>{"use strict";t.d(o,{d:()=>a});var n=t(687),r=t(9642),i=t(2783),s=t(3210),c=t(6274);function a(){let e=(0,s.useContext)(c.TP);return(0,n.jsx)(i.f,{icon:r.qU.Microphone,onClick:o=>{e.setState({...e.context,microphoneMuted:o})}})}},3947:e=>{e.exports={voiceRoom:"voice-room_voiceRoom__Z2Hov",videoFrame:"voice-room_videoFrame__gBw9g",videoFeed:"voice-room_videoFeed__YzH1d",video:"voice-room_video__cz1ZP",voiceRoomActionBar:"voice-room_voiceRoomActionBar__W1uH7"}},4431:(e,o,t)=>{"use strict";t.r(o),t.d(o,{default:()=>s});var n=t(7413);t(1120);var r=t(7391),i=t.n(r);function s({children:e}){return(0,n.jsx)("html",{className:i().html,lang:"en",children:(0,n.jsx)("body",{className:i().body,children:e})})}},4471:(e,o,t)=>{"use strict";t.d(o,{G:()=>a});var n=t(687),r=t(9642),i=t(2783),s=t(3210),c=t(6274);function a(){let e=(0,s.useContext)(c.TP);return(0,n.jsx)(i.f,{icon:r.qU.Camera,onClick:o=>{e.setState({...e.context,video:o})}})}},6274:(e,o,t)=>{"use strict";t.d(o,{TP:()=>h,mr:()=>g});var n=t(687),r=t(3210),i=t(3947),s=t.n(i);t(9642);var c=t(7399),a=t(6189),l=t(2850),d=t(4471),u=t(3686),m=t(1757),v=t(2123);let f={microphoneMuted:!1,soundMuted:!1,video:!0},h=(0,r.createContext)({context:f,setState:()=>{}});function g({localStream:e}){let[o,t]=(0,r.useState)(f),i=(0,a.useSearchParams)(),l=i.get("roomName")||"";i.get("serverUrl");let d=(0,c.yK)({localStream:e,roomName:l});(0,c.ow)({peerConnection:d.peerConnection,roomName:l});let u=[];return e&&u.push({mediaStream:e,isMuted:!0}),d.guestStream&&u.push({mediaStream:d.guestStream,isMuted:!1}),(0,n.jsx)("div",{className:s().voiceRoom,children:(0,n.jsxs)(h.Provider,{value:{context:o,setState:t},children:[(0,n.jsx)(v.$,{streams:u}),(0,n.jsx)(x,{})]})})}function x(){return(0,n.jsxs)("div",{className:s().voiceRoomActionBar,children:[(0,n.jsx)(u.d,{}),(0,n.jsx)(m.u,{}),(0,n.jsx)(d.G,{}),(0,n.jsx)(l.Q,{})]})}},6664:(e,o,t)=>{Promise.resolve().then(t.t.bind(t,6346,23)),Promise.resolve().then(t.t.bind(t,7924,23)),Promise.resolve().then(t.t.bind(t,5656,23)),Promise.resolve().then(t.t.bind(t,99,23)),Promise.resolve().then(t.t.bind(t,8243,23)),Promise.resolve().then(t.t.bind(t,8827,23)),Promise.resolve().then(t.t.bind(t,2763,23)),Promise.resolve().then(t.t.bind(t,7173,23))},7391:e=>{e.exports={html:"primary_html__catJ_",body:"primary_body__VvzRC"}},7399:(e,o,t)=>{"use strict";t.d(o,{ow:()=>i,WO:()=>s,yK:()=>c});var n=t(3210),r=t(9642);function i(e){let{peerConnection:o,roomName:t}=e;console.log(`useChatConnection:${t}:${o}`);let{sendOffer:i}=function(e){let{peerConnection:o,roomName:t}=e;return{sendOffer:(0,n.useCallback)(async()=>{if(!o||!t)return;console.log("useOfferSending");let e=await o.createOffer();await o.setLocalDescription(e),r.sZ.emit("send_connection_offer",{roomName:t,offer:e})},[t,o])}}({peerConnection:o,roomName:t}),{handleConnectionOffer:s}=function(e){let{peerConnection:o,roomName:t}=e;return{handleConnectionOffer:(0,n.useCallback)(async({offer:e})=>{if(!o||!t)return;console.log("useSendingAnswer"),await o.setRemoteDescription(e);let n=await o.createAnswer();await o.setLocalDescription(n),r.sZ.emit("answer",{answer:n,roomName:t})},[t,o])}}({peerConnection:o,roomName:t}),{handleOfferAnswer:c}={handleOfferAnswer:(0,n.useCallback)(({answer:e})=>{o&&(console.log("useAnswerProcessing"),o.setRemoteDescription(e))},[o])};(0,n.useCallback)(()=>{r.sZ.emit("join_room",t)},[t]),(0,n.useCallback)(({candidate:e})=>{o&&o.addIceCandidate(e)},[o])}function s(){let[e,o]=(0,n.useState)();return{localStream:e}}function c(e){let{roomName:o,localStream:t}=e,[i,s]=(0,n.useState)();return{peerConnection:(0,n.useMemo)(()=>{if(t&&o){let e=new RTCPeerConnection({iceServers:[{urls:"stun:stun2.1.google.com:19302"}]});return e.addEventListener("icecandidate",({candidate:e})=>{e&&r.sZ.emit("send_candidate",{candidate:e,roomName:o})}),e.addEventListener("track",({streams:e})=>{console.log("Received remote track:",e),e&&e[0]&&s(e[0])}),e.addEventListener("connectionstatechange",()=>{console.log("Connection state:",e.connectionState)}),e.addEventListener("iceconnectionstatechange",()=>{console.log("ICE connection state:",e.iceConnectionState)}),t.getTracks().forEach(o=>{e.addTrack(o,t)}),e}},[t]),guestStream:i}}},7990:()=>{},8226:e=>{e.exports={toggleButton:"toggle-button_toggleButton__xEj1Z"}},9626:()=>{},9642:(e,o,t)=>{"use strict";let n;t.d(o,{qU:()=>a,sM:()=>s,cH:()=>i,sZ:()=>n,t5:()=>l,dS:()=>d,LV:()=>c});var r=t(7405);function i(){if(!n)return void console.log("Socket not initialized, cannot connect");n.connected||n.connect()}function s(){n&&n.disconnect()}function c(e){(n=(0,r.io)(e,{autoConnect:!1,extraHeaders:{"ngrok-skip-browser-warning":"123"}})).on("connect_error",e=>{console.log(`connect_error due to ${e.message}`),console.log(`connect_error due to ${e.name}`),console.log(`connect_error due to ${e.stack}`)})}var a=function(e){return e.Call="Call",e.Camera="Camera",e.Microphone="Microphone",e.Sound="Sound",e}({});let l={Call:"./icon/voiceroom-call-off.svg",Camera:"./icon/voiceroom-camera-off.svg",Microphone:"./icon/voiceroom-microphone-off.svg",Sound:"./icon/voiceroom-sound-off.svg"},d={Call:"./icon/voiceroom-call-on.svg",Camera:"./icon/voiceroom-camera-on.svg",Microphone:"./icon/voiceroom-microphone-on.svg",Sound:"./icon/voiceroom-sound-on.svg"}},9727:()=>{},9816:(e,o,t)=>{Promise.resolve().then(t.t.bind(t,6444,23)),Promise.resolve().then(t.t.bind(t,6042,23)),Promise.resolve().then(t.t.bind(t,8170,23)),Promise.resolve().then(t.t.bind(t,9477,23)),Promise.resolve().then(t.t.bind(t,9345,23)),Promise.resolve().then(t.t.bind(t,2089,23)),Promise.resolve().then(t.t.bind(t,6577,23)),Promise.resolve().then(t.t.bind(t,1307,23))}};